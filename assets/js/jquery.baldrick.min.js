!function(e){if(!a){var a={},t={},r={_plugins:{},load:{},bind:{},event:function(e,a){return e},pre_filter:function(e){return e.data},filter:function(e){return e},target:function(e){if("string"==typeof e.params.success?"function"==typeof window[e.params.success]&&window[e.params.success](e):"function"==typeof e.params.success&&e.params.success(e),e.params.target)if(e.params.target.is("textarea,input")&&"object"==typeof e.data?e.params.target.val(JSON.stringify(e.data)).trigger("change"):e.params.target[e.params.targetInsert](e.data),"string"==typeof e.params.callback){if("function"==typeof window[e.params.callback])return window[e.params.callback](e)}else if("function"==typeof e.params.callback)return e.params.callback(e)},request_data:function(e){return e.data},request:function(r){if((r.params.trigger.data("cacheLocal")||r.params.trigger.data("cacheSession"))&&!r.params.trigger.data("cachePurge")){var s;if(r.params.trigger.data("cacheLocal")?s=r.params.trigger.data("cacheLocal"):r.params.trigger.data("cacheSession")&&(s=r.params.trigger.data("cacheSession")),"undefined"!=typeof a[s])return{data:a[s]};if("undefined"!=typeof Storage){var n;if(r.params.trigger.data("cacheLocal")?n=localStorage.getItem(s):r.params.trigger.data("cacheSession")&&(n=sessionStorage.getItem(s)),n){try{n=JSON.parse(n)}catch(i){n=n}return{data:n}}}}return t[r.params.trigger.prop("id")]&&t[r.params.trigger.prop("id")].abort(),t[r.params.trigger.prop("id")]=e.ajax(r.request),t[r.params.trigger.prop("id")]},request_complete:function(e){e.params.complete(e),e.params.loadElement.removeClass(e.params.loadClass),t[e.params.trigger.prop("id")]&&delete t[e.params.trigger.prop("id")]},request_error:function(e){e.params.error(e),e.params.complete(e.jqxhr,e.textStatus)},refresh:function(a,t){e(t.triggerClass).baldrick(t)}};e.fn.baldrick=function(a){var t=function(e,a,t){var r;for(var s in l.helpers._plugins)if("function"==typeof l.helpers._plugins[s][e]&&(r=l.helpers._plugins[s][e](a,l,t),"undefined"!=typeof r&&(a=r),a===!1))return!1;if("function"==typeof l.helpers[e]&&(r=l.helpers[e](a,l,t),"undefined"!=typeof r&&(a=r),!a))return!1;for(var n in l.helpers._plugins)if("function"==typeof l.helpers._plugins[n]["after_"+e]&&(r=l.helpers._plugins[n]["after_"+e](a,l,t),"undefined"!=typeof r&&(a=r),a===!1))return!1;return a},s=function(a){var t={},r=a.find("input,radio,checkbox,select,textarea,file"),s={};if(r.length){for(var n=0;n<r.length;n++)if(null!==r[n].getAttribute("name")){for(var i=e(r[n]),l=i.prop("name").replace(/\[/gi,":").replace(/\]/gi,""),o=l.split(":"),c=i.is(":checkbox,:radio")?i.filter(":checked").val():i.val(),d={},p=o.length-1;p>=0;p--){var u=o[p];if(0===u.length&&("undefined"==typeof s[o[p-1]]?s[o[p-1]]=0:s[o[p-1]]+=1,u=s[o[p-1]]),p===o.length-1)d[u]=c;else{var f=d;d={},d[u]=f}}e.extend(!0,t,d)}return t}},n=this.selector,i=this.not("._tisBound");i.addClass("_tisBound"),"undefined"!=typeof a&&"object"==typeof a.helper&&(r._plugins._params_helpers_=a.helper);var l=e.extend(!0,a,{helpers:r},{triggerClass:n}),o=function(){return!0},c={before:o,callback:!1,success:!1,complete:o,error:o};for(var d in c)"string"==typeof l[d]?c[d]="function"==typeof window[l[d]]?window[l[d]]:o:"function"==typeof l[d]&&(c[d]=l[d]);return i=t("bind",i),i===!1?this:t("ready",i.each(function(a){this.id||(this.id="baldrick_trigger_"+((new Date).getTime()+a));var r=e(this),n=r.data("event")?r.data("event"):l.event?l.event:r.is("form")?"submit":"click";return r.on(n,function(a){var r=e(t("event",this,a));if(r.data("for")){var o=e(r.data("for")),d=e.extend({},o.data(),r.data());return delete d["for"],o.data(d),o.is("form")?(o.submit(),this):o.trigger(o.data("event")?o.data("event"):n)}if(r.is("form")&&!r.data("request")&&r.attr("action")&&r.data("request",r.attr("action")),r.is("a")&&!r.data("request")&&r.attr("href")&&(r.attr("href").indexOf("#")<0?r.data("request",r.attr("href")):r.data("href",r.attr("href"))),(r.data("before")&&"function"==typeof window[r.data("before")]?window[r.data("before")](this,a):c.before(this,a))!==!1){var p={trigger:r,callback:r.data("callback")?"function"==typeof window[r.data("callback")]?window[r.data("callback")]:r.data("callback"):c.callback,success:r.data("success")?"function"==typeof window[r.data("success")]?window[r.data("success")]:r.data("success"):c.success,method:r.data("method")?r.data("method"):r.attr("method")?r.attr("method"):l.method?l.method:"GET",dataType:r.data("type")?r.data("type"):l.dataType?l.dataType:!1,timeout:r.data("timeout")?r.data("timeout"):12e4,target:r.data("target")?"_parent"===r.data("target")?r.parent():e("_self"===r.data("target")?r:r.data("target")):e(l.target?l.target:"<html>"),targetInsert:r.data("targetInsert")?"replace"===r.data("targetInsert")?"replaceWith":r.data("targetInsert"):l.targetInsert?"replace"===l.targetInsert?"replaceWith":l.targetInsert:"html",loadClass:r.data("loadClass")?r.data("loadClass"):l.loadClass?l.loadClass:"loading",activeClass:r.data("activeClass")?r.data("activeClass"):l.activeClass?l.activeClass:"active",activeElement:r.data("activeElement")?"_parent"===r.data("activeElement")?r.parent():e(r.data("activeElement")):l.activeElement?"_parent"===l.activeElement?r.parent():e(l.activeElement):r,cache:r.data("cache")?r.data("cache"):l.cache?l.cache:!1,complete:r.data("complete")&&"function"==typeof window[r.data("complete")]?window[r.data("complete")]:c.complete,error:r.data("error")&&"function"==typeof window[r.data("error")]?window[r.data("error")]:c.error,resultSelector:!1,event:n};if(p.url=r.data("request")?r.data("request"):l.request?l.request:p.callback,p.loadElement=r.data("loadElement")?"_parent"===r.data("loadElement")?r.parent():e(r.data("loadElement")):l.loadElement&&e(l.loadElement)?e(l.loadElement):p.target,p=t("params",p),p===!1)return!1;if(console.log(p),a.preventDefault(),"function"==typeof window[p.url]){var u=window[p.url](p,n);return u=t("pre_filter",{data:u,params:p}),u=t("filter",{data:u,rawData:u,params:p}),t("target",u),t("refresh",{params:p}),t("request_complete",{jqxhr:null,textStatus:"complete",request:w,params:p}),this}try{if(e(p.url).length)var u=e(p.url).is("input,select,radio,checkbox,file,textarea")?e(p.url).val():e(p.url).is("form")?s(e(p.url)):e(p.url).html()}catch(a){}if("undefined"!=typeof u){if("json"===p.dataType)try{u=JSON.parse(u)}catch(a){}u=t("pre_filter",{data:u,params:p}),u=t("filter",{data:u,rawData:u,params:p}),t("target",u),t("refresh",{params:p}),t("request_complete",{jqxhr:null,textStatus:"complete",request:w,params:p});return this}switch(typeof p.url){case"function":return p.url(this,a);case"boolean":case"object":return;case"string":if(p.url.indexOf(" ")>-1){var f=p.url.split(" ");p.url=f[0],p.resultSelector=f[1]}}r.data("group")?e('._tisBound[data-group="'+r.data("group")+'"]').each(function(){var a=e(this),t=a.data("activeElement")?"_parent"===a.data("activeElement")?a.parent():e(a.data("activeElement")):l.activeElement?"_parent"===l.activeElement?r.parent():e(l.activeElement):a;t.removeClass(a.data("activeClass")?a.data("activeClass"):l.activeClass?l.activeClass:p.activeClass)}):e("._tisBound:not([data-group])").each(function(){var a=e(this),t=a.data("activeElement")?"_parent"===a.data("activeElement")?a.parent():e(a.data("activeElement")):l.activeElement?"_parent"===l.activeElement?r.parent():e(l.activeElement):a;t.removeClass(a.data("activeClass")?a.data("activeClass"):l.activeClass?l.activeClass:p.activeClass)});p.activeElement.addClass(p.activeClass),p.loadElement.addClass(p.loadClass);var g;if("undefined"==typeof FormData||!r.is("input:file")&&"POST"!==p.method){var m=r.serializeArray(),h=p.trigger.data(),v=[];l.data&&(h=e.extend(l.data,h)),m.length&&(e.each(m,function(e,a){v.push(a)}),p.requestData=s(r)),p.data&&(h=e.extend(h,p.data)),g=h,p.requestData=e.extend(r.data(),p.requestData)}else{p.method="POST",p.contentType=!1,p.processData=!1,p.cache=!1,p.xhrFields={onprogress:function(e){e.lengthComputable}},g=r.is("form")?new FormData(r[0]):new FormData,r.is("input,select,textarea")&&r.data("_value",r.val());for(var y in p.trigger.data())g.append(y,p.trigger.data(y));if(p.data&&g.append("data",JSON.stringify(p.data)),r.is("input,select,textarea"))if(r.is("input:file"))if(r[0].files.length>1)for(var _=0;_<r[0].files.length;_++)g.append(r.prop("name"),r[0].files[_]);else g.append(r.prop("name"),r[0].files[0]);else r.is("input:checkbox")||r.is("input:radio")?r.prop("checked")&&g.append(r.prop("name"),r.val()):g.append(r.prop("name"),r.val())}var w={url:p.url,data:t("request_data",{data:g,params:p}),cache:p.cache,timeout:p.timeout,type:p.method,success:function(a,r,s){if(p.resultSelector)if("object"==typeof a){for(var n=p.resultSelector.replace(/\[/g,".").replace(/\]/g,"").split("."),i=a,l=0;l<n.length;l++)i=i[n[l]];a=i}else if("string"==typeof a){var o=e(p.resultSelector,e("<html>").html(a));1===o.length?a=e("<html>").html(o).html():(a=e("<html>"),o.each(function(){a.append(this)}),a=a.html())}var c=a;if(p.trigger.data("cacheLocal")||p.trigger.data("cacheSession")){var d;if(p.trigger.data("cacheLocal")?d=p.trigger.data("cacheLocal"):p.trigger.data("cacheSession")&&(d=p.trigger.data("cacheSession")),"undefined"!=typeof Storage)if(p.trigger.data("cacheLocal"))try{localStorage.setItem(d,s.responseText)}catch(u){console.log(u)}else if(p.trigger.data("cacheSession"))try{sessionStorage.setItem(d,s.responseText)}catch(u){console.log(u)}e(window).trigger("baldrick.cache",d)}a=t("pre_filter",{data:a,request:w,params:p,xhr:s}),a=t("filter",{data:a,rawData:c,request:w,params:p,xhr:s}),t("target",a)},complete:function(e,a){t("request_complete",{jqxhr:e,textStatus:a,request:w,params:p}),t("refresh",{jqxhr:e,textStatus:a,request:w,params:p}),r.data("once")&&r.off(n).removeClass("_tisBound")},error:function(e,a,r){t("request_error",{jqxhr:e,textStatus:a,error:r,request:w,params:p})}};if(p.dataType&&(w.dataType=p.dataType),"undefined"!=typeof p.contentType&&(w.contentType=p.contentType),"undefined"!=typeof p.processData&&(w.processData=p.processData),"undefined"!=typeof p.xhrFields&&(w.xhrFields=p.xhrFields),w=t("request_params",w,p),w===!1)return i;var x=t("request",{request:w,params:p});if(x.data){var u=x.data;t("target",t("filter",t("pre_filter",{data:u,request:w,params:p}))),t("request_complete",{jqxhr:!1,textStatus:!0,request:w,params:p}),t("refresh",{jqxhr:!1,textStatus:!0,request:w,params:p})}}}),(r.data("autoload")||r.data("poll"))&&(r.data("delay")?setTimeout(function(e,a){return e.trigger(a)},r.data("delay"),r,n):r.trigger(n)),r.data("poll")&&(r.data("delay")?setTimeout(function(e,a){return setInterval(function(e,a){return e.trigger(a)},e.data("poll"),e,a)},r.data("delay")):setInterval(function(e,a){return e.trigger(a)},r.data("poll"),r,n)),this}))},e.fn.baldrick.cacheObject=function(e,t){a[e]=t},e.fn.baldrick.registerhelper=function(a,t,s){var n={};"object"==typeof t?(n[a]=t,r._plugins=e.extend(!0,n,r._plugins)):"string"==typeof t&&"string"==typeof a&&"function"==typeof s&&(n[t]={},n[t][a]=s,r._plugins=e.extend(!0,n,r._plugins))}}}(jQuery);